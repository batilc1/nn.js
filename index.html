<!doctype html>

<html lang="en">
<head>
  <meta charset="utf-8">

  <title>The HTML5 Herald</title>
  <meta name="description" content="The HTML5 Herald">
  <meta name="author" content="SitePoint">
</head>

<body>
<script src="https://code.jquery.com/jquery-2.2.1.min.js"></script>
  <script src="build/nn.js"></script>
  <script type="text/javascript">
var layers = [
    { type: 'input', size: nn.Size3(1, 1, 1) },
    { type: 'lstm' },
    { type: 'regression' }
];

var net = new nn.Network({
    layers: layers,
    learner: { method: 'adadelta', timespan: 6, decay: {l1: 0, l2: 1e-4} }
});

  	setTimeout(function () {

		console.time("nn");
var k = 0;
for (var i = 0; i < 50000; i++) {
    if (Math.random() < 0.4) {
        net.forward([1]);
        var loss = net.backward([0]);

        for (var t = 0; t < 3; t++) {
            net.forward([0]);
            net.backward([0]);
        }

        net.forward([0]);
        loss = net.backward([1]);

        if (k % 10 === 0) console.log(loss);
        ++k;

        if (k % 500 == 0) {
        	var x = 0;
        }
    }

    net.forward([0]);
}

var stats = net.layers.stats();
console.log('100,000 iterations of network with ' + stats.parameters + ' parameters and ' + stats.nodes + ' nodes');
console.timeEnd("nn");



	}, 1);

  </script>
</body>
</html